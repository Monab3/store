<div class="bewertungen__sourounding-container bewertungen__grid">
    <div class="bewertungen__titel">
        <h4> Durchschnittliche Kundenbewertung:</h4>
        <div class="bewertungen__starreview__stars">
            <svg *ngFor="let star of getFullStarsArray(bewertungWrapper.averageRating)"
                xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#FAAD14" class="bi bi-star-fill"
                viewBox="0 0 16 16">
                <path
                    d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
            </svg>
            <svg *ngFor="let star of getStarsArray(bewertungWrapper.averageRating)" xmlns="http://www.w3.org/2000/svg"
                width="16" height="16" fill="#FAAD14" class="bi bi-star" viewBox="0 0 16 16">
                <path
                    d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z" />
            </svg>
        </div>
        <p class="text-regular">{{bewertungWrapper.bewertungen.length}}
            Kundenmeinung{{bewertungWrapper.bewertungen.length==1 ? '': 'en'}}</p>
    </div>
    <div *ngIf="id &&  4> bewertungWrapper.bewertungen.length && bewertungWrapper.bewertungen.length > 0"
        class="bewertungen__container bewertungen--hide-for-small">
        <article *ngFor="let bewertung of bewertungWrapper.bewertungen" class="bewertungen">
            <blockquote class="bewertungen__quote">
                <header>
                    <h3 class="h3 bewertungen__quote__author">{{bewertung.vorname}}
                        {{bewertung.nachname}}</h3>
                </header>
                <p class="text-regular bewertungen__quote__text">"{{bewertung.text}}"</p>
            </blockquote>
            <section class="bewertungen__starreview">
                <div class="bewertungen__starreview__stars">
                    <svg *ngFor="let star of getFullStarsArray(bewertung.sterne)" xmlns="http://www.w3.org/2000/svg"
                        width="16" height="16" fill="#FAAD14" class="bi bi-star-fill" viewBox="0 0 16 16">
                        <path
                            d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                    </svg>
                    <svg *ngFor="let star of getStarsArray(bewertung.sterne)" xmlns="http://www.w3.org/2000/svg"
                        width="16" height="16" fill="#FAAD14" class="bi bi-star" viewBox="0 0 16 16">
                        <path
                            d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z" />
                    </svg>
                </div>
            </section>
            <footer>
                <p class="text-fine">
                    {{dateConverter(bewertung.datum)}}
                </p>
            </footer>
        </article>
    </div>

    <div *ngIf="id &&  bewertungWrapper.bewertungen.length >= 4" class="bewertungen__container">
        <ng-container *ngTemplateOutlet="bewertungSlider"></ng-container>
    </div>

    <div *ngIf="id && 4 > bewertungWrapper.bewertungen.length && bewertungWrapper.bewertungen.length > 0"
        class="bewertungen__container bewertungen--hide-for-medium-large">
        <ng-container *ngTemplateOutlet="bewertungSlider"></ng-container>
    </div>

    <button *ngIf="!openFormular && !bewertungAbgegeben" class="button button__secondary" (click)="toggleFormular()">
        <i class="bi bi-plus"></i>
        Eigene Bewertung schreiben
    </button>
    <div *ngIf="openThanYouText" class="bewertungen__sourounding-container">
        <div class="form__container__close">
            <button class="interaction-icon modal__button-close" (click)="closeThankyou()">
                <i class="bi  bi-x-lg bi-2x"></i>
            </button>
        </div>
        <p  class="text-regular">Vielen Dank, für Ihre Bewertung. </p>
    </div>
    <div class="form__grid" *ngIf="openFormular">
        <form class="form__container form" [formGroup]="bewertungForm">
            <div class="form__container__close">
                <button class="interaction-icon modal__button-close" (click)="toggleFormular()">
                    <i class="bi  bi-x-lg bi-2x"></i>
                </button>
            </div>
            <h3 class="h3">Teilen Sie Ihre Meinung mit</h3>
            <p class="text-regular">Online Bewertungen helfen uns unser Angebot zu verbessern. Hinterlassen sie auch
                eine Bewertung. </p>
            <div class="form__container--full-width">
                <label for="email">Email (Pflichtfeld)</label>
                <input class="form__input"
                    [ngClass]="{'form__input--invalid': bewertungForm.get('email')?.invalid && bewertungForm.get('email')?.touched}"
                    type="email" id="email" formControlName="email" />
                <p *ngIf="bewertungForm.get('email')?.invalid && bewertungForm.get('email')?.touched"
                    class="text-regular--red-signal">Bitte geben Sie eine gültige E-Mail-Adresse ein.</p>
            </div>
            <p class="text-regular">Falls Sie Anonym bleiben wollen, geben sie keinen Vor- und Nachnamen an.</p>
            <div class="form__container--half-width">
                <div class="form--span-all">
                    <label for="vorname">Vorname</label>
                    <input class="form__input" id="vorname" formControlName="vorname" />
                </div>
                <div class="form--span-all">
                    <label for="nachname">Nachname</label>
                    <input class="form__input" id="nachname" formControlName="nachname"
                        [ngClass]="{'form__input--invalid': bewertungForm.get('nachname')?.invalid && bewertungForm.get('nachname')?.touched}" />
                    <p *ngIf="bewertungForm.get('nachname')?.invalid && bewertungForm.get('nachname')?.touched"
                        class="text-regular--red-signal">Bitte teilen Sie uns Ihren Nachnamen mit.</p>
                </div>
            </div>
            <div class="form__container--full-width">
                <label for="bewertung">Ihre Bewertung (Pflichtfeld)</label>
                <textarea id="bewertung" class="form__input" formControlName="bewertung"
                    [ngClass]="{'form__input--invalid': bewertungForm.get('bewertung')?.invalid && bewertungForm.get('bewertung')?.touched}"></textarea>
                <p *ngIf="bewertungForm.get('bewertung')?.errors?.['required']  && bewertungForm.get('bewertung')?.touched"
                    class="text-regular--red-signal">Bitte hinterlassen Sie eine Bewertung.</p>
                <p *ngIf="bewertungForm.get('bewertung')?.errors?.['maxlength'] && bewertungForm.get('bewertung')?.touched"
                    class="text-regular--red-signal">Ihre Bewertung kann höchstens 240 Zeichen lang sein. Hinterlassen
                    Sie eine kürzere Bewertung oder kontaktieren Sie uns
                    persönlich mit Hilfe des <a class="text-link"
                        href="https://www.buhrmannbecher.de/kontakt/">Kontaktformulars</a></p>
            </div>
            <button type="submit" [class.button__main--invalid]="!bewertungForm.valid" class="button button__main"
                [disabled]="!bewertungForm.valid" (click)="onSubmit()"
                title="Füllen Sie das Formular aus, um eine Bewertung absenden zu können." placeholder="Top">Bewertung
                abschicken</button>
        </form>
    </div>
</div>

<ng-template #bewertungSlider>
    <button (click)="goToPrevious()" class="bewertungen__arrow--right"><i
            class="bi bi-arrow-left-circle-fill"></i></button>
    <article class="bewertungen--small">
        <blockquote class="bewertungen__quote">
            <header>
                <h3 class="text-regular--red-dark--bold bewertungen__quote__author">
                    {{getpreviousSlide().vorname}}
                    {{getpreviousSlide().nachname}}</h3>
            </header>
            <p class="text-fine bewertungen__quote__text">"{{getpreviousSlide().text}}"</p>
        </blockquote>
        <section class="bewertungen__starreview">
            <div class="bewertungen__starreview__stars">
                <svg *ngFor="let star of getFullStarsArray(getpreviousSlide().sterne)"
                    xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="#FAAD14" class="bi bi-star-fill"
                    viewBox="0 0 16 16">
                    <path
                        d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                </svg>
                <svg *ngFor="let star of getStarsArray(getpreviousSlide().sterne)" xmlns="http://www.w3.org/2000/svg"
                    width="12" height="12" fill="#FAAD14" class="bi bi-star" viewBox="0 0 16 16">
                    <path
                        d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z" />
                </svg>
            </div>
        </section>
        <footer>
            <p class="text-fine">
                {{dateConverter(getpreviousSlide().datum)}}
            </p>
        </footer>
    </article>
    <article class="bewertungen">
        <blockquote class="bewertungen__quote">
            <header>
                <h3 class="h3 bewertungen__quote__author">
                    {{bewertungWrapper.bewertungen[currentIndex].vorname}}
                    {{bewertungWrapper.bewertungen[currentIndex].nachname}}</h3>
            </header>
            <p class="text-regular bewertungen__quote__text">"{{bewertungWrapper.bewertungen[currentIndex].text}}"</p>
        </blockquote>
        <section class="bewertungen__starreview">
            <div class="bewertungen__starreview__stars">
                <svg *ngFor="let star of getFullStarsArray(bewertungWrapper.bewertungen[currentIndex].sterne)"
                    xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#FAAD14" class="bi bi-star-fill"
                    viewBox="0 0 16 16">
                    <path
                        d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                </svg>
                <svg *ngFor="let star of getStarsArray(bewertungWrapper.bewertungen[currentIndex].sterne)"
                    xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#FAAD14" class="bi bi-star"
                    viewBox="0 0 16 16">
                    <path
                        d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z" />
                </svg>
            </div>
        </section>
        <footer>
            <p class="text-fine">
                {{dateConverter(bewertungWrapper.bewertungen[currentIndex].datum)}}
            </p>
        </footer>
    </article>
    <article class="bewertungen--small">
        <blockquote class="bewertungen__quote">
            <header>
                <h3 class="text-regular--red-dark--bold bewertungen__quote__author">
                    {{getNextSlide().vorname}}
                    {{getNextSlide().nachname}}</h3>
            </header>
            <p class="text-fine bewertungen__quote__text">"{{getNextSlide().text}}"</p>
        </blockquote>
        <section class="bewertungen__starreview">
            <div class="bewertungen__starreview__stars">
                <svg *ngFor="let star of getFullStarsArray(getNextSlide().sterne)" xmlns="http://www.w3.org/2000/svg"
                    width="12" height="12" fill="#FAAD14" class="bi bi-star-fill" viewBox="0 0 16 16">
                    <path
                        d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                </svg>
                <svg *ngFor="let star of getStarsArray(getNextSlide().sterne)" xmlns="http://www.w3.org/2000/svg"
                    width="12" height="12" fill="#FAAD14" class="bi bi-star" viewBox="0 0 16 16">
                    <path
                        d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z" />
                </svg>
            </div>
        </section>
        <footer>
            <p class="text-fine">
                {{dateConverter(getNextSlide().datum)}}
            </p>
        </footer>
    </article>
    <button (click)="goToNext()" class="bewertungen__arrow--left"><i class="bi bi-arrow-right-circle-fill"></i></button>
</ng-template>